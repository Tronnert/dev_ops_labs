## Лабораторная работа №3* по DevOps

**Выполнили**: Стафеев Иван (K3221), Голованов Дмитрий (K3223)

**Цель:** Сделать красиво работу с секретами. Например, поднять Hashicorp Vault (или другую секретохранилку) и сделать так, чтобы ci/cd пайплайн (или любой другой ваш сервис) ходил туда, брал секрет, использовал его не светя в логах. В Readme аргументировать почему ваш способ красивый, а также описать, почему хранение секретов в CI/CD переменных репозитория не является хорошей практикой.

### Пререквизит: код "проекта"

Реализуемый в этой лабораторной "проект" полностью совпадает с тем, который был описан в [лабораторной №3](https://github.com/Tronnert/dev_ops_labs/tree/main/lab3). По сути эта лабораторная - усиление предыдущей, так что использование того же проекта оправданно. Напомним, в чем его суть.

Имеется лог пользовательской активности на сайте вида
```bash
userid	timestamp	action	value	testids
user_0001	2022-02-04T09:04:00	category	0.00	12125;16320;12619;11095
user_0001	2022-02-04T09:07:00	search	0.00	12125;16320;12619;11095
user_0001	2022-02-04T09:07:00	product	0.00	12125;16320;12619;11095
user_0001	2022-02-04T09:12:00	mainpage	0.00	12125;16320;12619;11095
user_0001	2022-02-04T09:17:00	confirmation	28790.00	12125;16320;12619;110951
...
```

Необходимо подсчитать DAU по покупкам для месяца с наименьшей прибылью для компании. Для этого был написан [код](https://github.com/Tronnert/dev_ops_labs/blob/main/lab3*/mr_script.py) и [тест](https://github.com/Tronnert/dev_ops_labs/blob/main/lab3*/test_mr_script.py). Код написан на Python с использованием библиотеки `mrjob` (предполагается, что задача выполняется на кластере)

Исходя из задачи, можно определить пайплайн для CI/CD: установка Python и необходимых зависимостей, линтинг кода, проведение тестов, а затем создание Docker-образа и отправка его на Docker Hub.

Работа с секретами нужна на последнем этапе, так как для пуша образа на DockerHub нужен токен, и именно для хранения этого токена и получения доступа к нему будет использована секретохранилка.

